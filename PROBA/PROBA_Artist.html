<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artemisia</title>
    <link rel="icon" href="https://i.postimg.cc/zXXhVbHv/11.png" type="image/x-icon">
    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <!-- Header с поисковой строкой -->
    <header>
        <div class="header-left">
            <div class="menu-icon" id="menuIcon" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <a href="index.html"> <img src="https://i.postimg.cc/hjBzgfqS/1.png" alt="Логотип" class="logo"> </a>
        </div>

        <div class="search-container" id="searchContainer">
            <div class="search-box">
                <div class="search-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#aaa" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                    </svg>
                </div>
                <input type="text" id="searchInput" placeholder="Поиск художников..." autocomplete="off">
                <button class="search-btn" onclick="searchArtists()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="#262626" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
                    </svg>
                </button>
            </div>
            <div class="search-results" id="searchResults"></div>
        </div>

        <button class="mobile-search-btn" id="mobileSearchBtn" onclick="toggleSearch()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" />
            </svg>
        </button>
        <div class="search-backdrop" id="searchBackdrop" onclick="toggleSearch()"></div>
    </header>

    <!-- Menu Drawer -->
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
    <div class="drawer" id="drawer">
        <ul class="menu">
            <li><a href="../index.html">
                    <img src="https://i.postimg.cc/6p8Gfk0N/home.png" alt="Главная">
                    Главная
                </a>
            </li>

            <li>
                <a href="Prem_Artist.html">
                    <img src="https://i.postimg.cc/Z5Y5rqkg/prem-art.png" alt="Художники">
                    Prem Artist
                </a>
            </li>

            <li>
                <a href="Artist.html">
                    <img src="https://i.postimg.cc/MGRMh1NP/man-14816778.png" alt="Художники">
                    Художники
                </a>
            </li>

            <li>
                <a href="Design.html">
                    <img src="https://i.postimg.cc/t4xNXgTY/free-icon-pen-tablet-4861056.png" alt="Художники">
                    Дизайнеры
                </a>
            </li>

            <li>
                <a href="#" class="has-submenu" onclick="toggleSubmenu(event)">
                    <img src="https://i.postimg.cc/85mFCN1L/mobile-shopping.png" alt="">
                    Услуги
                </a>

                <ul class="submenu">
                    <li>
                        <a href="Services.html#Commission" class="submenu-link" onclick="openTabByLink('Commission')">
                            COMMISSION ART
                        </a>
                    </li>
                    <li>
                        <a href="Services.html#Yunchy" class="submenu-link" onclick="openTabByLink('Yunchy')">
                            YCH
                        </a>
                    </li>
                    <li>
                        <a href="Services.html#art" class="submenu-link" onclick="openTabByLink('art')">
                            ADOPT
                        </a>
                    </li>
                </ul>
            </li>

            <li><a href="#">
                    <img src="https://i.postimg.cc/bYRbyHJ4/draw.png" alt="">
                    Комиксы
                </a>
            </li>

            <li class="separator-menu"></li>

            <li><a href="AboutUs.html#about-site">
                    Подробности о сайте
                </a>
            </li>

            <li><a href="AboutUs.html#publish-work">
                    Опубликовать работу
                </a>
            </li>

            <li><a href="AboutUs.html#guarantees">
                    Гаранты
                </a>
            </li>

            <li class="separator-menu"></li>

            <li>
                <a href="#" class="has-submenu" onclick="toggleSubmenu(event)">
                    <img src="https://i.postimg.cc/sDXB3kbZ/image.png" alt="">
                    Документы
                </a>
                <ul class="submenu">
                    <li><a href="Document.html#user-agreement" class="submenu-link">Соглашение</a></li>
                    <li><a href="Document.html#usage-rules" class="submenu-link">Правила использования</a></li>
                    <li><a href="Document.html#guaranteed-deals" class="submenu-link">Гарантийные сделки</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <a href="index.html" class="footer-logo-link">
                <img src="https://i.postimg.cc/hjBzgfqS/1.png" alt="Artemisia" class="footer-logo">
            </a>

            <div class="footer-links">
                <a href="html/AboutUs.html#about-site" class="footer-link">Подробности о сайте</a>
                <a href="https://t.me/Artemisia_publicationBot" class="footer-link">Опубликовать работу</a>
                <a href="https://t.me/Gg00Se" class="footer-link">Связь с гарантом</a>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="footer-text">
                Следите за обновлениями
                <a href="https://t.me/Artemisia_website" class="footer-link" target="_blank">@Artemisia_website</a>
            </p>

            <div class="footer-social">
                <!-- Telegram -->
                <a href="https://t.me/Artemisia_website" class="social-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM15.53 8.23C15.73 8.13 15.93 8.15 16.09 8.28C16.25 8.41 16.31 8.62 16.25 8.82L14.81 15.44C14.66 16.03 14.3 16.19 13.81 15.93L11.05 13.85L9.8 15.08C9.66 15.22 9.54 15.34 9.28 15.34L9.53 12.54L14.44 8.34C14.66 8.15 14.8 8.24 14.63 8.41L10.63 11.93L7.83 10.91C7.26 10.71 7.25 10.31 7.94 10.01L15.03 7.17C15.5 6.99 15.9 7.21 15.53 8.23Z" />
                    </svg>
                </a>

                <!-- VK -->
                <a href="https://vk.com" class="social-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M18.15 16.27H16.69C16.14 16.27 15.97 15.82 15 14.83C14.12 14 13.74 13.88 13.53 13.88C13.24 13.88 13.15 13.96 13.15 14.38V15.69C13.15 16.04 13.04 16.26 12.11 16.26C10.57 16.26 8.86 15.32 7.66 13.59C5.85 11.05 5.36 9.13 5.36 8.75C5.36 8.54 5.43 8.34 5.85 8.34H7.32C7.69 8.34 7.83 8.5 7.97 8.9C8.69 11 9.89 12.8 10.38 12.8C10.57 12.8 10.65 12.71 10.65 12.25V10.1C10.6 9.12 10.07 9.03 10.07 8.68C10.07 8.5 10.21 8.34 10.44 8.34H12.73C13.04 8.34 13.15 8.5 13.15 8.88V11.77C13.15 12.08 13.28 12.19 13.38 12.19C13.56 12.19 13.72 12.08 14.05 11.74C15.1 10.57 15.85 8.76 15.85 8.76C15.95 8.55 16.11 8.34 16.48 8.34H17.93C18.37 8.34 18.47 8.58 18.37 8.89C18.19 9.74 16.41 12.25 16.43 12.25C16.27 12.5 16.21 12.61 16.43 12.9C16.58 13.13 17.09 13.55 17.43 13.94C18.05 14.65 18.53 15.24 18.66 15.65C18.77 16.06 18.57 16.27 18.15 16.27Z" />
                    </svg>
                </a>

                <!-- YouTube -->
                <a href="https://youtube.com" class="social-icon" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
                    </svg>
                </a>

                <!-- TikTok -->
                <a href="https://www.tiktok.com/@artemisia_web_tt?_t=ZS-8xgqwBPHwfJ&_r=1" class="social-icon"
                    target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z" />
                    </svg>
                </a>
            </div>
        </div>
    </footer>

    <!-- Стрлека вверх -->
    <div id="backToBottomBtn" class="back-to-bottom-btn" onclick="scrollToBottom()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" />
        </svg>
    </div>

    <div id="backToTopBtn" class="back-to-top-btn" onclick="scrollToTop()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" />
        </svg>
    </div>

    <script>
        // Menu Functions
        function toggleMenu() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('overlay');
            const menuIcon = document.getElementById('menuIcon');
            const body = document.body;
            const searchInput = document.getElementById('searchInput');

            // Сохраняем позицию прокрутки перед открытием
            if (!body.classList.contains('menu-open')) {
                body.style.top = `-${window.scrollY}px`;
            }

            drawer.classList.toggle('open');
            overlay.classList.toggle('active');
            menuIcon.classList.toggle('active');
            body.classList.toggle('menu-open');
            searchInput.disabled = body.classList.contains('menu-open');

            // Восстанавливаем позицию прокрутки при закрытии
            if (!body.classList.contains('menu-open')) {
                const scrollY = parseInt(body.style.top || '0');
                body.style.top = '';
                window.scrollTo(0, -scrollY);
            }
        }

        function closeMenu() {
            const drawer = document.getElementById('drawer');
            const overlay = document.getElementById('overlay');
            const menuIcon = document.getElementById('menuIcon');
            const body = document.body;

            drawer.classList.remove('open');
            overlay.classList.remove('active');
            menuIcon.classList.remove('active');
            body.classList.remove('menu-open');
        }

        // Toggle submenus
        function toggleSubmenu(event) {
            event.preventDefault();
            const link = event.currentTarget;
            const submenu = link.nextElementSibling;

            // Close all other submenus first
            document.querySelectorAll('.submenu').forEach(menu => {
                if (menu !== submenu) {
                    menu.classList.remove('active');
                    menu.previousElementSibling.classList.remove('active');
                }
            });

            // Toggle current submenu
            link.classList.toggle('active');
            submenu.classList.toggle('active');
        }

        // Close menu when clicking on overlay
        document.getElementById('overlay').addEventListener('click', closeMenu);

        // New Search Functionality
        function toggleSearch() {
            const searchContainer = document.getElementById('searchContainer');
            const searchBackdrop = document.getElementById('searchBackdrop');
            const isActive = searchContainer.classList.contains('active');

            if (isActive) {
                searchContainer.classList.remove('active');
                searchBackdrop.classList.remove('active');
                document.getElementById('searchResults').classList.remove('active');
                document.getElementById('searchInput').value = '';
                document.body.style.overflow = 'auto';
            } else {
                searchContainer.classList.add('active');
                searchBackdrop.classList.add('active');
                document.getElementById('searchInput').focus();
                document.body.style.overflow = 'hidden';
            }

            // Close menu if open
            if (document.getElementById('drawer').classList.contains('open')) {
                toggleMenu();
            }
        }

        function searchArtists() {
            const searchText = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');

            if (!searchText) {
                resultsContainer.innerHTML = '<div class="no-results">Введите запрос для поиска</div>';
                resultsContainer.classList.add('active');
                return;
            }

            const artists = document.querySelectorAll('.profile-section');
            let found = false;
            resultsContainer.innerHTML = '';

            artists.forEach(artist => {
                const artistName = artist.querySelector('h1').textContent.toLowerCase();
                const artistStyle = artist.querySelector('p').textContent.toLowerCase();
                const artistLink = artist.querySelector('.profile-link').textContent.toLowerCase();
                const artistAvatar = artist.querySelector('.avatar').src;

                if (artistName.includes(searchText) || artistStyle.includes(searchText) || artistLink.includes(searchText)) {
                    found = true;
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';

                    resultItem.innerHTML = `
                    <img src="${artistAvatar}" alt="${artistName}">
                    <div class="info">
                        <div class="name">${artist.querySelector('h1').textContent}</div>
                        <div class="style">${artist.querySelector('p').textContent}</div>
                    </div>
                `;

                    resultItem.onclick = () => {
                        document.getElementById('searchInput').value = '';
                        scrollToArtist(artist);
                        toggleSearch();
                    };
                    resultsContainer.appendChild(resultItem);
                }
            });

            if (!found) {
                resultsContainer.innerHTML = '<div class="no-results">Поиск доступен на странице с Художниками </div>';
            }
            resultsContainer.classList.add('active');
        }

        // Highlight text
        function highlightText(element, searchText) {
            const text = element.textContent;
            const regex = new RegExp(`(${searchText})`, 'gi');
            element.innerHTML = text.replace(regex, match =>
                `<span class="highlight">${match}</span>`
            );
        }

        // Обновленная функция прокрутки к художнику
        function scrollToArtist(artist) {
            // Удаляем предыдущие подсветки
            document.querySelectorAll('.artist-highlight').forEach(el => {
                el.classList.remove('artist-highlight');
            });

            // Добавляем подсветку
            artist.classList.add('artist-highlight');

            // Прокручиваем плавно к элементу с учетом хедера
            const yOffset = -80;
            const y = artist.getBoundingClientRect().top + window.pageYOffset + yOffset;

            window.scrollTo({
                top: y,
                behavior: 'smooth'
            });

            // Убираем подсветку через 3 секунды
            setTimeout(() => {
                artist.classList.remove('artist-highlight');
            }, 3000);

            // Упрощенная обработка прерывания прокрутки
            const handleInterrupt = () => {
                artist.classList.remove('artist-highlight');
            };

            // Добавляем однократный обработчик
            window.addEventListener('scroll', handleInterrupt, {
                once: true,
                passive: true // Оптимизация для плавной прокрутки
            });

            // Гарантируем восстановление скролла
            setTimeout(() => {
                document.body.style.overflow = 'auto';
                document.body.style.position = 'static';
            }, 500);
        }

        // Search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                searchArtists();
            }
        });

        // Real-time search on input
        document.getElementById('searchInput').addEventListener('input', function () {
            if (this.value.length > 0) {
                searchArtists();
            } else {
                document.getElementById('searchResults').classList.remove('active');
            }
        });

        // Close search when clicking outside (desktop)
        document.addEventListener('click', function (e) {
            const searchContainer = document.getElementById('searchContainer');
            const searchResults = document.getElementById('searchResults');
            const searchInput = document.getElementById('searchInput');
            const mobileSearchBtn = document.getElementById('mobileSearchBtn');

            if (!searchContainer.contains(e.target) &&
                e.target !== mobileSearchBtn &&
                !searchResults.contains(e.target)) {
                searchResults.classList.remove('active');
            }
        });

        // Close search when scrolling on mobile
        window.addEventListener('scroll', function () {
            if (window.innerWidth <= 768 &&
                document.getElementById('searchContainer').classList.contains('active')) {
                toggleSearch();
            }
        });

        // Function to open tab by link
        function openTabByLink(tabId) {
            // This function would be implemented in the Services.html page
            console.log('Opening tab:', tabId);
        }

        // Back to Top Function
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide back to top button on scroll
        window.addEventListener('scroll', function () {
            const backToTopBtn = document.getElementById('backToTopBtn');
            const backToBottomBtn = document.getElementById('backToBottomBtn');
            const scrollPosition = window.pageYOffset;
            const windowHeight = window.innerHeight;
            const documentHeight = document.body.scrollHeight;

            // Определяем, находится ли пользователь внизу страницы
            const isAtBottom = scrollPosition + windowHeight >= documentHeight - 100;

            // Управление кнопкой "Вверх"
            if (scrollPosition > 300 && !isAtBottom) {
                backToTopBtn.classList.add('active');
                backToBottomBtn.classList.add('with-up');
            } else {
                backToTopBtn.classList.remove('active');
                backToBottomBtn.classList.remove('with-up');
            }

            // Управление кнопкой "Вниз"
            if (!isAtBottom) {
                backToBottomBtn.classList.add('active');
            } else {
                backToBottomBtn.classList.remove('active');
            }
        });

        // Добавьте эти функции в ваш JavaScript
        function scrollToBottom() {
            const footer = document.querySelector('.site-footer');
            footer.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    </script>
</body>

</html>